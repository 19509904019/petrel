# python_homework ：12306抢票系统

该文件是一个12306抢票系统，大体思路可分为如下两部分：

一、先对数据进行分析

二、通过代码实现功能

    首先对第一部分进行说明，这一部分主要是对车票信息数据内容进行解析：
        1.首先使用F12打开开发者工具再选择network，选择我们想要的数据包
        2.通过搜索数据找到相应的数据包，然后查看url地址、请求方式，以及请求头参数
        3.在请求头参数中用字典形成添加User-Agent以及Cookie，添加Cookie的目的是防止反爬

    其次是对第二部分进行说明，主要即通过爬虫数据通过代码实现抢票功能：
        1.发送请求，对于刚刚分析得到的url地址发送请求
        2.获取数据，获取服务器返回响应数据
        3.解析数据，提取我们想要的数据内容
        4.格式化输入效果

下面具体讲解实现过程以及使用方法：

实现过程：

      一、查票
      
        1.发送请求
           我们通过python模拟浏览器对于url地址发送请求，用headers来伪装代码，让其伪装成一个浏览器发送请求，headers为字典形式，
           其包括User-Agent以及Cookie，User-Agent是用户代理，为浏览器基本身份标识，Cookie为用户信息，常用于检测是否登录账号。
           在对地址发送请求时，其中的车站名为三字码形式，我们将爬好的三字码数据用city.json存放在file文件夹中以供使用。
        
        2.获取数据
           在获取数据时要注意一定要在headers中添加Cookie，否则获取数据会报错
            
        3.解析数据
           在这里我们使用一个新的包prettytable，用来对提取的数据进行排版。前面我们通过爬虫获取了车票数据，现在我们通过split方法对
           数据进行分割成列表，分别提取车次、出发时间、到达时间、耗时、特等座、一等座、二等座、软卧、硬卧、硬座、无座信息，并在列表
           中对应相应的信息
           
        4.输出效果
           通过对数据的解析便可以查询相应的车次信息
           
      二、抢票
        在这个过程中首先对浏览器进行设置，实现自动买票的过程与手动过程一致，只要找到相应的按钮并使用函数进行点击操作即可，整个抢票代码
        使用模块GetTicket.py进行封装，便于在MainSystem.py中进行复用

使用方法：

      1.在MainSystem.py中运行，为了防止误操作，我在代码中使用了人工手动填写始发站、终点站以及日期，如果想实现自动抢票，可以在代码中将始
      发站、终点站以及日期进行固定，存放在main文件夹下，其中GetTicket.py为买票过程，被引用在MainSystem.py中
      
      2.本程序是基于chrome浏览器实现的，在使用chrome浏览器驱动时，要注意浏览器的驱动要与浏览器版本号相一致，只要大版本号相同即可，我将浏
      览器驱动chromedriver.exe和驱动下载地址drive_url.py存放在了drive文件夹下，如果版本与本程序不一致可自行下载
      
      3.file文件夹下存放的是城市三字码，用于对url发送请求
      
      4.在本程序中还要在account.py中写上自己真实的用户名和密码，保存在user文件夹下，程序中的账号和密码为随手编写

           
 
